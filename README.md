# 프로젝트
마이크로프로세서 프로젝트 반려동물 자동 급식기

# 개요
정량급식으로 인한 반려동물의 과체중 방지 및 건강증진의 목적으로 설계. 자동화로 인해 해야할 일을 줄일 수 있음.
Atmega128을 이용하여 기본적인 설계, Codevision과 AVR studio 4를 이용하여 소스코드 설계예정.

# 아이디어 설계
필요한 센서: RTC 모듈-> 급식시간 관리
            DC모터-> 사료 배출
            4열 7세그먼트 LED-> 남은 급식 횟수, 시간표시
            1체널 릴레이 모듈-> DC모터 전원 제어
            RGB LED 모듈-> 상태 표시(대기/급식중/완료)
            MPU-6050 자이로/가속도 센서-> 밥그릇 움직임 감지 (섭취 여부 확인)
하드웨어 설계:
            아직 미정

# 동작 알고리즘 구현 예시

초기화 : 센서, feedcount 

루프 안에서 실행 
현재 시간 읽기 (RTC)

급식 시간대 확인
'''
if 현재 시간이 급식 시간대 && feedCount > 0:
            LED = 녹색
            모터 ON (목표량에 해당하는 시간만 작동)
            모터 OFF
            LED = 흰색
            7세그에 feedCount 표시
            상태 = "급식 완료, 섭취 대기"
            섭취 감지 (MPU-6050)
            일정 시간(예: 5초) 동안 가속도/자이로 값 변화량 > threshold
                      if true && cooldown == false:
                        feedCount -= 1
                        7세그 feedCount 업데이트
                        LED = 파랑 (대기 모드)
                        cooldown = true (예: 10분 동안 재감지 무시)
                        쿨다운 관리
                        일정 시간 지나면 cooldown 해제
'''

codeVision에서 코드 작성하고 AVR studio 4에서 디버깅을 해야한다.

# 생각해 봐야할 것

하드웨어를 어떻게 컴팩트하게 설계를 할건지, 쟤료는 어떻게 수급을 할 것인지에 대해.
코드 구현시 고려해야할 변수에 대해 최대한 제어를 해봐야할 것.

# 프로젝트 시작
2025년 11월 12일 프로젝트 시작

# 구성품 구체화
5v tt 모터 (기어박스 있는 모터), RTC모듈, 1채널 릴레이모듈, 4열 7세그먼트 LED, RGB LED 모듈, IR 적외선 근접 센서 모듈, 점퍼선, 브레드보드, 패들 휠

# 추가 구매 해야하는 센서 및 부품
5v tt 모터, IR 적외선 근접 센서 모듈, 패들 휠, 전원 어댑터(배럴 잭)

# 초기 설계 당시와 달라진 점
mpu센서는 twi 통신을 해야하기 때문에 프로젝트 마감 시간관계상 제약이 예상된다.
반려동물이 직접 접근해서 사료를 먹을 때 인식할 수 있는 적외선 센서로 변경한다. 
Vcc(5V), GND, 그리고 'Analog Out' 핀 1개만 ATmega128A의 ADC 포트에 연결하면 된다.
CodeVisionAVR의 코드 마법사에서 ADC를 활성화하고, read_adc(0) 함수 한 줄로 센서 값을 읽을 수 있기에 mpu보다 더 쉽게 설계가 가능하다.

